<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="C:\Users\HP\my-react-app\public\JPG/">
    <link rel="stylesheet" href="C:\Users\HP\my-react-app\public\CSS\kasjer.css">
    <title>Algorytm kasjera</title>
    <script>
        function start(){
            const kwota = document.getElementById('input').value;
            if (!Number(kwota)){
                alert("Niepoprawny format! Wprowadź w formacie ZŁ.GR!");
                return;
            }
            const wynik = oblicz(kwota);
            const container = document.getElementById('container');
            if (container.hasChildNodes)
              for (let i = container.childNodes.length-1; i>=0; i--)
                container.childNodes[i].remove();
            let back = '';
            for (const x in wynik){
                let  obrazek = document.createElement('SPAN');
                switch (x){
                    case '500zł' : back = 'url("500zlotych.jpg")'; break;
                    case '200zł' : back = 'url("200zlotych.jpg")'; break;
                    case '100zł' : back = 'url("100zlotych.jpg")'; break;
                    case '50zł' : back = 'url("50zlotych.jpg")'; break;
                    case '10zł' : back = 'url("10zlotych.jpg")'; break;
                    case '20zł' : back = 'url("20zlotych.jpg")'; break;
                    case '5zł' : back = 'url("5zlotych.jpg")'; break;
                    case '2zł' : back = 'url("2zlote.jpg")'; break;
                    case '1zł' : back = 'url("1zloty.jpg")'; break;
                    case '50gr' : back = 'url("50groszy.jpg")'; break;
                    case '20gr' : back = 'url("20groszy.jpg")'; break;
                    case '10gr' : back = 'url("10groszy.jpg")'; break;
                    case '5gr' : back = 'url("5groszy.jpg")'; break;
                    case '2gr' : back = 'url("2grosze.jpg")'; break;
                    case '1gr' : back = 'url("1grosz.jpg")'; break;
                }
                obrazek.style.backgroundImage = back;
                obrazek.style.color = 'grey';
                obrazek.innerText = '?';
                const index = container.childNodes.length;
                obrazek.addEventListener('animationend',
                 () => setTimeout(() => {
                     obrazek.innerText = wynik[x];
                     obrazek.style.color = 'orangered';
                    }, 250 * index));
                container.appendChild(obrazek);
            }  
        }
        function oblicz(kwota){
            const ZL = [500, 200,100,50,20,10,5,2,1];
            //const MONETY = [5,2,1];
            const GR = [50,20,10,5,2,1];
            function petla(amount, arr, ident){
                for (let i = 0; i<arr.length; i++){
                    if (amount >= arr[i]){
                      wynik[arr[i]+ident] = Math.floor(amount/arr[i]);
                      amount -= wynik[arr[i]+ident] * arr[i];
                    }
                }
                return amount;
            }            
            let wynik = {};
            //console.log(wynik);  // !!!!!?????????

            kwota = petla (kwota, ZL, 'zł');
            //console.log(wynik, kwota, typeof kwota);
            
            kwota = petla(kwota * 100, GR, 'gr');

            for (const x in wynik) console.log(x + ': ' + wynik[x]);
            return wynik;
        }
        /*function kasjer(amount){
            const money = [500,200,100,50,20,10,5,2,1,0.5,0.2,0.1,0.05, 0.02, 0.01];
            let i = 0;
            while(amount > 0){
                if(money[i] <= amount){
                    const rest = Math.floor(amount / money[i]);
                    console.log(rest);
                    amount = amount - Math.round(rest * money[i]);
                }
            }
        }*/
    </script>
</head>
<body>
    <h2>Ałgorytm kasjera</h2>
    <input autofocus onchange="start()" size="17" id = 'input' placeholder="wprowadź kwotę: ZŁ.GR"/>
    <button onclick="start()">Enter</button>
    <div id = 'container'>
    </div>
    
</body>    
</html>